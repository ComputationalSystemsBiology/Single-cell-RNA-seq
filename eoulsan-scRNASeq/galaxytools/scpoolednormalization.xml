<tool id="scpoolednormalization" name="scpoolednormalization" >
	<description> Perform library size estimation for all cells using pooling strategy proposed by Lun et al.</description>
	<command interpreter="docker"  dockerimage="genomicpariscentre/scpoolednormalization:0.1">Rscript /scripts/SCSpikelessPooledNormalization.R $matrix $cells $genes $mode $color_by $precluster $min_cluster_size $force_positive $length_correction $cell_cycle $organism $cellsoutput $detection $n_cells</command>
	<inputs>
		<param format="filtered_expression_matrix_tsv" name="matrix" type="data" label="Source file" />
		<param format="filtered_cells_metadata_tsv" name="cells" type="data" label="Source file" />
		<param format="genes_metadata_tsv" name="genes" type="data" label="Source file" />
		
		<param name="mode" type="text" value="Endogenous" label="Consider endogenous genes or nuclear genes"/>
		<param name="color_by" type="text" value="Condition" label="Name of column to use to color cells on plot"/>
		<param name="precluster" type="text" value="False" label="Weither to precluster cells or not"/>
		<param name="min_cluster_size" type="integer" value="100" label="Minimum number of cell per cluster (should be at most twice less than number of cells)"/>
		<param name="force_positive" type="text" value="False" label="Weither to force for positive size factor values or not"/>
		<param name="length_correction" type="text" value="False" label="Weither to correct for feature length or not before plotting"/>
		<param name="cell_cycle" type="text" value="False" label="Weither to annotate cells for cell cycle or not"/>
		<param name="organism" type="text" value="mus_musculus" label="Organism for cell cycle annotation, should be one of : mus_musculus or homo_ sapiens"/>
		<param name="detection" type="int" value ="1" label="Detection threshold to consider a gene expressed"/>
		<param name="n_cells" type="int" value="1" label="Number detection to keep a gene"/>
	</inputs>
	<outputs>
		<data format="normalized_cells_metadata_tsv" name="cellsoutput" />
	</outputs>
</tool>