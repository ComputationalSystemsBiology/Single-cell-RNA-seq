<tool id="umiextract" name="umiextract">
	<description>Extract barcodes and UMIs and add to read names - more info : "umi_tools extract -help"</description>
	<command interpreter="docker" dockerimage="genomicpariscentre/umi-tools:0.5.3">bash -c "umi_tools extract --stdin ${inputr1} --stdout \$( basename ${outputread2} | sed 's/_outputread2_/_outputread1_/' ) --read2-in ${inputr2} --read2-out=${outputread2} --whitelist=${whitelist_umi}  --bc-pattern=${bc_pattern} --filter-cell-barcode  --quality-filter-threshold=${quality_filter_threshold} --quality-filter-mask=${quality_filter_mask} --error-correct-cell 2> ${outputread2}.err"</command>
	<inputs>
		<param format="fastq" name="inputr1" type="data" label="Source file"/>
		<param format="fastq" name="inputr2" type="data" label="Source file"/>
		<param format="whitelist_umi" name="whitelist_umi" type="data" label="Source file"/>
		<param name="bc_pattern" type="text" value="CCCCCCCCCCCCCCCCNNNNNNNNNN" label="Barcode pattern (identifies bases position) - N = UMI position (required) ; C = cell barcode position (optional) ; X = sample position (optional)"/>
		<param name="quality_filter_threshold" type="integer" value="0" label="Remove reads where any UMI base quality score falls below this threshold - Usage : quality-filter-threshold=30"/>
		<param name="quality_filter_mask" type="integer" value="0" label="If a UMI base has a quality below this threshold, replace the base with 'N' - Usage : quality-filter-mask=10"/>
	</inputs>
	<outputs>
		<data format="fastq" name="outputread2"/>
	</outputs>
</tool>
